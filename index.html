<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TicTacToe AI-Agentic Dashboard</title>
  <style>
    body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,sans-serif;margin:0;padding:2rem;background:#f5f7fa;color:#1a202c;}
    .container{max-width:1200px;margin:0 auto;}
    h1{margin:0 0 0.5rem 0;font-size:2rem;color:#2d3748;}
    .subtitle{color:#718096;margin-bottom:2rem;font-size:1rem;}
    a{color:#3182ce;text-decoration:none;}
    a:hover{text-decoration:underline;}
    .card{background:white;border-radius:8px;padding:1.5rem;margin-bottom:1.5rem;box-shadow:0 1px 3px rgba(0,0,0,0.1);}
    .card h2{margin:0 0 1rem 0;font-size:1.25rem;color:#2d3748;border-bottom:2px solid #e2e8f0;padding-bottom:0.5rem;}
    .metrics-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1rem;margin-bottom:1.5rem;}
    .metric{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;padding:1.25rem;border-radius:8px;box-shadow:0 4px 6px rgba(0,0,0,0.1);}
    .metric.secondary{background:linear-gradient(135deg,#f093fb 0%,#f5576c 100%);}
    .metric.deprecated{background:#cbd5e0;color:#4a5568;opacity:0.7;}
    .metric-label{font-size:0.875rem;opacity:0.9;margin-bottom:0.25rem;font-weight:500;}
    .metric-value{font-size:2rem;font-weight:bold;margin-bottom:0.25rem;}
    .metric-target{font-size:0.75rem;opacity:0.8;}
    .metric-status{display:inline-block;padding:0.25rem 0.5rem;border-radius:4px;font-size:0.75rem;margin-top:0.5rem;background:rgba(255,255,255,0.2);}
    .links{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:0.75rem;}
    .link-card{background:#f7fafc;padding:1rem;border-radius:6px;border-left:4px solid #3182ce;transition:all 0.2s;}
    .link-card:hover{background:#edf2f7;transform:translateX(4px);}
    .link-card a{display:block;font-weight:500;}
    .badge{display:inline-block;padding:0.25rem 0.75rem;border-radius:12px;font-size:0.75rem;font-weight:600;margin-left:0.5rem;}
    .badge.primary{background:#c3dafe;color:#2b6cb0;}
    .badge.new{background:#c6f6d5;color:#22543d;}
    .info{background:#ebf8ff;border-left:4px solid#3182ce;padding:1rem;border-radius:4px;font-size:0.875rem;color:#2c5282;}
    .timestamp{color:#a0aec0;font-size:0.875rem;margin-top:1rem;}
  </style>
</head>
<body>
  <div class="container">
    <h1>üéØ TicTacToe AI-Agentic Dashboard</h1>
    <div class="subtitle">Metrics reimagined for AI-driven development</div>
    
    <div class="card">
      <h2>üåü Primary AI-Agentic Metrics <span class="badge new">NEW</span></h2>
      <div class="metrics-grid">
        <div class="metric" id="spec-coverage-card">
          <div class="metric-label">üìã Specification Coverage</div>
          <div class="metric-value" id="spec-coverage-value">--</div>
          <div class="metric-target">Target: 25%+ ratio (1:4 spec:code)</div>
          <div class="metric-status" id="spec-coverage-status">Loading...</div>
        </div>
        <div class="metric">
          <div class="metric-label">üß¨ Mutation Score</div>
          <div class="metric-value">60%+</div>
          <div class="metric-target">Run: <code>dotnet stryker</code></div>
          <div class="metric-status">Quality gate: 60%</div>
        </div>
        <div class="metric">
          <div class="metric-label">‚ôªÔ∏è Regeneration Safety</div>
          <div class="metric-value">80%+</div>
          <div class="metric-target">Code regenerable from specs</div>
          <div class="metric-status">See workflow results</div>
        </div>
        <div class="metric">
          <div class="metric-label">‚ö° Context Efficiency</div>
          <div class="metric-value">TBD</div>
          <div class="metric-target">Tokens per feature</div>
          <div class="metric-status">Future metric</div>
        </div>
      </div>
      <div class="info">
        <strong>Philosophy:</strong> In AI-agentic development, specifications are the primary artifact. Code is generated and regenerated from specs. Quality = Specification completeness + Behavioral correctness.
      </div>
    </div>

    <div class="card">
      <h2>üìä Secondary Metrics <span class="badge primary">Behavioral Focus</span></h2>
      <div class="metrics-grid">
        <div class="metric secondary" id="line-coverage-card">
          <div class="metric-label">üìà Line Coverage</div>
          <div class="metric-value" id="line-coverage-value">--</div>
          <div class="metric-target">Relaxed threshold: 60%</div>
          <div class="metric-status" id="line-coverage-status">Loading...</div>
        </div>
        <div class="metric secondary" id="branch-coverage-card">
          <div class="metric-label">üîÄ Branch Coverage</div>
          <div class="metric-value" id="branch-coverage-value">--</div>
          <div class="metric-target">Behavioral completeness > %</div>
          <div class="metric-status" id="branch-coverage-status">Loading...</div>
        </div>
      </div>
      <div class="info">
        <strong>Note:</strong> Traditional coverage is secondary to specification coverage. It measures test execution, not behavioral completeness.
      </div>
    </div>

    <div class="card">
      <h2>üìé Documentation & Reports</h2>
      <div class="links">
        <div class="link-card">
          <a href="coverage/index.htm">üìä Coverage Report (HTML)</a>
          <small style="color:#718096;">Detailed structural coverage analysis</small>
        </div>
        <div class="link-card">
          <a href="livingdoc/index.html">üìñ Living Documentation</a>
          <small style="color:#718096;">SpecFlow BDD scenarios</small>
        </div>
        <div class="link-card">
          <a href="benchmarks.html">‚ö° Performance Benchmarks</a>
          <small style="color:#718096;">Historical performance tracking</small>
        </div>
        <div class="link-card">
          <a href="https://github.com/CoforgeInsurance/cid-ai-guide/blob/main/agentic-metrics.yml">üéØ Metrics Framework</a>
          <small style="color:#718096;">Complete metrics definition</small>
        </div>
      </div>
    </div>

    <details style="margin-top:1rem;">
      <summary style="cursor:pointer;padding:0.5rem;background:#f7fafc;border-radius:4px;font-weight:500;">
        ‚ö†Ô∏è Deprecated Metrics (Click to expand)
      </summary>
      <div class="card" style="margin-top:0.5rem;opacity:0.6;">
        <div class="metrics-grid">
          <div class="metric deprecated">
            <div class="metric-label">Cyclomatic Complexity</div>
            <div class="metric-value" style="font-size:1.25rem;">Deprecated</div>
            <div class="metric-target">AI generates optimal complexity</div>
          </div>
          <div class="metric deprecated">
            <div class="metric-label">CRAP Score</div>
            <div class="metric-value" style="font-size:1.25rem;">Hidden</div>
            <div class="metric-target">See coverage report internals</div>
          </div>
          <div class="metric deprecated">
            <div class="metric-label">DRY Enforcement</div>
            <div class="metric-value" style="font-size:1.25rem;">Relaxed</div>
            <div class="metric-target">Context > Abstraction</div>
          </div>
        </div>
        <div class="info" style="background:#fff5f5;border-color:#fc8181;color:#742a2a;">
          <strong>Why deprecated?</strong> These metrics optimize for human-crafted code. In AI-agentic development, they optimize for the wrong outcomes and create unnecessary constraints.
        </div>
      </div>
    </details>

    <div class="timestamp" id="timestamp">Loading...</div>
  </div>

  <script>
    // Load coverage summary
    fetch('coverage-summary.json')
      .then(r => r.json())
      .then(d => {
        const linePct = (d.lineRate * 100).toFixed(1);
        const branchPct = (d.branchRate * 100).toFixed(1);
        
        document.getElementById('line-coverage-value').textContent = linePct + '%';
        document.getElementById('branch-coverage-value').textContent = branchPct + '%';
        
        const lineStatus = parseFloat(linePct) >= 60 ? '‚úÖ Above threshold' : '‚ö†Ô∏è Below 60%';
        const branchStatus = parseFloat(branchPct) >= 50 ? '‚úÖ Good' : 'üìä Monitor';
        
        document.getElementById('line-coverage-status').textContent = lineStatus;
        document.getElementById('branch-coverage-status').textContent = branchStatus;
        
        document.getElementById('timestamp').textContent = 'Last updated: ' + d.generatedUtc;
      })
      .catch(e => {
        document.getElementById('line-coverage-value').textContent = 'N/A';
        document.getElementById('branch-coverage-value').textContent = 'N/A';
        document.getElementById('line-coverage-status').textContent = 'Data unavailable';
        document.getElementById('branch-coverage-status').textContent = 'Data unavailable';
      });

    // Load specification coverage
    fetch('spec-coverage.json')
      .then(r => r.json())
      .then(d => {
        if (d.specificationCoverage) {
          const score = d.specificationCoverage.score || 0;
          const ratio = d.specificationCoverage.ratio || 0;
          
          document.getElementById('spec-coverage-value').textContent = score.toFixed(0) + '%';
          
          const status = score >= 100 ? 'üéØ Excellent!' : 
                         score >= 75 ? '‚úÖ Good' :
                         score >= 50 ? 'üìà Improving' : '‚ö†Ô∏è Needs work';
          document.getElementById('spec-coverage-status').textContent = 
            status + ' (Ratio: ' + (ratio * 100).toFixed(1) + '%)';
        }
      })
      .catch(e => {
        document.getElementById('spec-coverage-value').textContent = 'Run pending';
        document.getElementById('spec-coverage-status').textContent = 'First run in progress';
      });
  </script>
</body>
</html>
